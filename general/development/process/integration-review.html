<!doctype html>
<html lang="en-AU" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-general docs-doc-id-development/process/integration-review">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.18">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-L9EE8RW5B1"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-L9EE8RW5B1",{})</script>
<link rel="icon" href="/devdocs/img/icons/orange_m.svg">
<link rel="manifest" href="/devdocs/manifest.json">
<meta name="theme-color" content="rgb(208, 99, 0)">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#000">
<link rel="apple-touch-icon" href="/devdocs/img/icons/maskable_icon.png">
<link rel="mask-icon" href="/devdocs/img/icons/maskable_icon.png" color="rgb(208, 99, 0)">
<meta name="msapplication-TileImage" content="/devdocs/img/icons/maskable_icon.png">
<meta name="msapplication-TileColor" content="#000"><title data-rh="true">Integration review | Moodle</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://moodle.github.io/devdocs/general/development/process/integration-review"><meta data-rh="true" name="docusaurus_locale" content="en-AU"><meta data-rh="true" name="docsearch:language" content="en-AU"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-general-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-general-current"><meta data-rh="true" property="og:title" content="Integration review | Moodle"><meta data-rh="true" name="description" content="All the information related to the integration review process during the Moodle development."><meta data-rh="true" property="og:description" content="All the information related to the integration review process during the Moodle development."><link data-rh="true" rel="icon" href="/devdocs/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://moodle.github.io/devdocs/general/development/process/integration-review"><link data-rh="true" rel="alternate" href="https://moodle.github.io/devdocs/general/development/process/integration-review" hreflang="en-AU"><link data-rh="true" rel="alternate" href="https://moodle.github.io/devdocs/general/development/process/integration-review" hreflang="x-default"><link rel="stylesheet" href="/devdocs/assets/css/styles.69bffa64.css">
<link rel="preload" href="/devdocs/assets/js/runtime~main.336c63d6.js" as="script">
<link rel="preload" href="/devdocs/assets/js/main.1cb9071a.js" as="script">
</head>
<body class="navigation-with-keyboard" data-theme="light">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/devdocs/"><div class="navbar__logo"><img src="/devdocs/img/Moodle_M_icon.svg" alt="Moodle" class="themedImage_W2Cr themedImage--light_TfLj" height="32px" width="32px"><img src="/devdocs/img/Moodle_M_icon.svg" alt="Moodle" class="themedImage_W2Cr themedImage--dark_oUvU" height="32px" width="32px"></div><b class="navbar__title">Moodle</b></a><a class="navbar__item navbar__link" href="/devdocs/docs/gettingstarted/quickstart">Guides</a><a class="navbar__item navbar__link" href="/devdocs/general/community">Community</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/devdocs/general/development/process">Process</a><a class="navbar__item navbar__link" href="/devdocs/general/development/policies/codingstyle">Policies</a><a class="navbar__item navbar__link" href="/devdocs/general/development/tools">Tools</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/devdocs/docs">master</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/devdocs/docs">master</a></li><li><a class="dropdown__link" href="/devdocs/docs/4.0">4.0</a></li><li><a href="https://docs.moodle.org/dev/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Legacy documentation<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a class="dropdown__link" href="/devdocs/versions">All versions</a></li></ul></div><a href="https://github.com/moodle/moodle" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_S7eR colorModeToggle_vKtC"><button class="clean-btn toggleButton_rCf9 toggleButtonDisabled_Pu9x" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_v35p"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_nQuB"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="dsla-search-wrapper"><div class="dsla-search-field" data-tags="default,docs-default-current,docs-general-current"></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_RiAD"><nav class="menu thin-scrollbar menu_izAj"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/devdocs/general/development/process">Process</a><button aria-label="Toggle the collapsible sidebar category &#x27;Process&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/devdocs/general/development/process/triage">Triage</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/devdocs/general/development">Development</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/devdocs/general/development/process/peer-review">Peer review</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/devdocs/general/development/process/integration-review">Integration review</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/devdocs/general/development/process/testing">Testing</a><button aria-label="Toggle the collapsible sidebar category &#x27;Testing&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/devdocs/general/development/process-moodleapp">Moodle App Process</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/devdocs/general/development/tracker">Tracker</a><button aria-label="Toggle the collapsible sidebar category &#x27;Tracker&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_FykI"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_DTRl"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Xlws" aria-label="breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/devdocs/">🏠</a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/devdocs/general/development/process"><span itemprop="name">Process</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="item name">Integration review</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Integration review</h1></header><h2 class="anchor anchorWithStickyNavbar_mojV" id="purpose">Purpose<a class="hash-link" href="#purpose" title="Direct link to heading">​</a></h2><p>The purpose of the integration review is to:</p><ul><li>Ensure consistent quality across the codebase</li><li>Ensure that pedagogical aims of Moodle are at the forefront of any change</li><li>Take into consideration the holistic view of moodle, looking at the impact beyond where the - original developer was focused</li><li>Provide guidance and feedback to developers, helping them learn and improve</li><li>Consider <strong>other perspectives</strong> of other users perhaps not considered by original developers e.g.<ul><li>Teachers</li><li>Students</li><li>Administrators</li><li>The Moodle mobile app</li><li>Third-party developers</li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="integration-principles">Integration Principles<a class="hash-link" href="#integration-principles" title="Direct link to heading">​</a></h2><p>Integration (non-technical but philosophical) principles (4-5 words determining if something has to be integrated/backported or no):</p><ol><li><strong>safety</strong>: if something does not look safe, stable, it won&#x27;t land. Be conservative.</li><li><strong>security</strong>: all security issues, if not breaking principle (1) will be integrated/backported to all security-supported versions.</li><li><strong>community</strong>: Anything not useful for the community (or against it) won&#x27;t be integrated/backported. We can measure the community as 10%HQ, 10%Partners, 10%Core developers, 20%Admins, 20%Teachers, 30%Students - not exact science, just one approximation, you know). Question yourself how the change will affect those groups and ensure positives are bigger always (only affected groups count). All community issues, if not breaking principles (1) and (2) will be integrated.</li><li><strong>typology</strong>: bug fixes will be always integrated/backported to all the supported branches if none of the principles (1), (2) and (3) are violated. Also, partially-unsupported branches can receive some if they are important enough. Improvements and new features go, exclusively, to master only, that&#x27;s the main reason for short release periods. We <em>MUST</em> not make exceptions to this.</li><li><strong>priority</strong>: issues will be &quot;ordered down&quot; by priority down (where priority is a <a href="https://tracker.moodle.org/issues/?filter=14000" target="_blank" rel="noopener noreferrer">mix of various factors</a>, dynamic). And will be integrated in that order. If something has to be delayed, better if it is low priority. Once again, nothing here can break any of the previous principles.</li><li><strong>tests</strong>: unit tests and acceptance tests will backported as much as possible without breaking (1) and (2). New features required to implement tests will be backported if the API is 100% backwards compatible.</li></ol><p>If all the principles are fulfilled, the answer for &quot;should I integrate this?&quot; is, &quot;yes, please!&quot; (apart from technical findings, of course, that can lead to the issue being not integrated/reopened at last, these principles are 100% philosophical)</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="component-lead-review-process">Component lead review process<a class="hash-link" href="#component-lead-review-process" title="Direct link to heading">​</a></h2><p>Please see the <a href="https://docs.moodle.org/dev/Component_Lead_Review" target="_blank" rel="noopener noreferrer">Component Lead Review</a> documentation for further information on the CLR process.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="integration-review-process">Integration Review Process<a class="hash-link" href="#integration-review-process" title="Direct link to heading">​</a></h2><ol><li>Run automated pre-checks against the continuous integration server. (In future this can be automated and also moved into a publicly
accessible domain.)</li><li>Final code review, much like the peer review, except that this is the final check. To include<ol><li>Takes place in-situ (integrated) to examine the impact to other integrated issues</li><li>Checking against the coding guidelines - syntax/whitespace</li><li>Moodleisms - using the built-in API functions where appropriate</li><li>Cross-DB compatibility</li><li>Security</li></ol></li><li>Check purpose - the patch needs to fix the issue reported.</li><li>Verify target branches are appropriated. They must match 100% the rules defined for <a href="#backporting">backporting issues</a>.</li><li>Ensure backwards compatibility is maintained. As a starting point backwards compatibility must always be maintained. Where backwards
compatibility is affected it should be:<ol><li>Well discussed with evidence of justification</li><li>Documented and communicated to the community</li></ol></li><li>Ensure backwards compatibility with the Moodle mobile app. Especially in areas where the Moodle app uses pre-rendered content from
the site (like Quiz or Lesson)</li><li>Verify that components are correct and check the right people have been involved (e.g. component maintainers)</li><li>For fundamental changes, check that a thread has been started in an appropriate forum, and other Moodlers, given enough time to
comment.</li><li>Tests - must be written to guide tester to verify the fix is working.<ol><li>Unit test - very much preferred if applicable</li><li>at end of Wednesday, ensure testing is going to complete as expected. else take other actions (speak to test manager)</li></ol></li><li>Performance - we have to look at maintaining optimum code here, as far as simple patches that can affect performance. (simple
optimisations)</li><li>Scalability - if master only - we&#x27;re looking far future, stable branches may not be lucky to get such improvements.</li><li>git authorship is correct vs committer + credits due are mentioned + email addresses</li><li>Documentation / PHP Doc / readability</li><li><a href="/devdocs/general/development/tracker/labels">Tracker issue labels</a> which might need adding. Particularly:<ol><li><code>docs_required</code> / <code>dev_docs_required</code> / <code>release_notes</code>: About which type of documentation is required for the issue.</li><li><code>ui_change</code> / <code>api_change</code>: About the implications of the change.</li><li><code>unit_test_required</code> / <code>acceptance_test_required</code> / <code>qa_test_required</code>: About the need to cover the issue with some test.</li><li><code>affects_mobileapp</code> / <code>affects_workplace</code> / <code>affects_moodlecloud</code>: About issues that may affect other Moodle products and services</li></ol></li><li><a href="https://docs.moodle.org/dev/Tracker_issue_versions" target="_blank" rel="noopener noreferrer">Tracker issue versions</a> review. Particularly:<ol><li>Fixed Version after integration - is the versions that the issue is patched for. (A rule here: <a href="https://docs.moodle.org/dev/Tracker_issue_versions#Some_general_and_simple_rules" target="_blank" rel="noopener noreferrer">&quot;or stables or master&quot;</a>).</li><li>Remove any <code>Must fix for X.Y</code> version once the issue is integrated.</li></ol></li><li>Whenever any of the points above or any other detail require extra information or action to be done by the assignee, and the integrator
considers that they can be fixed without needing to discard/reopen, the issue will be sent to <code>Waiting for feedback</code> with all the details to
complete. Once everything has been fulfilled, always within a reasonable amount of time (still to decide), the issue will be sent back to
integration by the assignee.</li><li>Assign the tester.<ol><li>Don&#x27;t forget to update the weight in the testers sheet</li></ol></li></ol><h2 class="anchor anchorWithStickyNavbar_mojV" id="schedule">Schedule<a class="hash-link" href="#schedule" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_mojV" id="in-normal-periods">In normal periods<a class="hash-link" href="#in-normal-periods" title="Direct link to heading">​</a></h3><p>The integrators adhere to the following schedule: (links here should convert the times into your local timezone)</p><p>All the flow of issues to current integration is automatically controlled by the <a href="https://ci.moodle.org/view/Tracker/job/TR%20-%20Manage%20queues%20on%20normal/" target="_blank" rel="noopener noreferrer">Manage queues on normal job</a> that keeps the current queue fed with issues, moves important ones and prioritises long awaiting issues. Issues are picked in strict integration order.</p><ul><li>Monday to Thursday until <a href="http://time.unitarium.com/utc/4" target="_blank" rel="noopener noreferrer">12:00 (UTC+8)</a>: Integration and <a href="/devdocs/general/development/process/testing/integrated-issues#the-testing-process">Testing</a> happen. Note that 24h before the cutoff it&#x27;s possible to pick issues out of order towards queues reduction.</li><li>Thursday after 12:00 (UTC+8): Integrators duties during this time are to monitor, facilitate and &#x27;problem solve&#x27; the testing process.</li><li>Friday: Testing should be completed before (the sooner the better) 12:00 (UTC+8) at which time remaining testing failures will be reverted/rewritten and reopened. The release process follows.</li><li>Friday after <a href="http://time.unitarium.com/utc/4" target="_blank" rel="noopener noreferrer">12:00 (UTC+8)</a>: Should be kept free from integration. Integration systems are maintained during this time.</li></ul><p>Note that under the strict schedule above, it is specially important <strong>to be as responsive as possible</strong>, both when the issue is being integrated and when <a href="/devdocs/general/development/process/testing/integrated-issues#expectation-from-tester">testing</a>. Any significant delay by any of the actors involved will result in the issue being moved out from current integration.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="during-continuous-integrationfreezeqa-period">During continuous integration/Freeze/QA period<a class="hash-link" href="#during-continuous-integrationfreezeqa-period" title="Direct link to heading">​</a></h3><p>During the continuous integration period (last 6 weeks before release) the integration team are continuously focused on producing regular builds of master to facilitate QA and fast fixes to issues identified.</p><p>Throughout:</p><ul><li>Issues are picked on a one by one basis, prioritising <a href="/devdocs/general/development/process/testing/qa#resetting-tests">QA blockers</a> and master regressions (MUST FIX) issues.</li><li>After freeze (usually 5 weeks before release) any non bug fix issues are given the <code>integration_held</code> label and are explicitly not picked for integration. Still, anybody is able to add a reasoned <code>unhold_requested</code> label to those issues in order to get them unblocked by the development managers. Note this does not guarantee the issue to land before release, but just gives it a chance to be integrated like any other issue.</li><li>Also, coming together with freeze, all the flow of issues to current integration is automatically controlled by the <a href="https://ci.moodle.org/view/Tracker/job/TR%20-%20Manage%20queues%20on%20continuous/" target="_blank" rel="noopener noreferrer">Manage queues on continuous</a> job that keeps the current queue fed with issues, moves important ones, holds new features and other niceties. Issues are picked in strict integration order.</li><li>Our goal is to achieve &#x27;release-ability&#x27; throughout, so we stop integrating to ensure a release happens</li></ul><p>So, basically, once under continuous integration, we do organize work as follows:</p><ul><li>Continuous officially begins. Everybody is on integration. Until end of on-sync period.</li><li>Monday: Integration and <a href="/devdocs/general/development/process/testing/integrated-issues#differences-in-test-process-during-continuous-integration-periods">testing</a> happens.</li><li>Tuesday: Integration happens until <a href="http://time.unitarium.com/utc/4" target="_blank" rel="noopener noreferrer">12:00 (UTC+8)</a>, afterwards we try to <a href="/devdocs/general/development/process/testing/integrated-issues#differences-in-test-process-during-continuous-integration-periods">achieve 100% &#x27;Test Passed&#x27;</a> and stop integrating any untested changes until a master release is produced.</li><li>Wednesday: <!-- -->[Assuming a master release has been rolled]<!-- --> Integration and testing continues</li><li>Thursday: Integration and testing continues</li><li>Friday: Integration happens until <a href="http://time.unitarium.com/utc/4" target="_blank" rel="noopener noreferrer">12:00 (UTC+8)</a>, afterwards we try to achieve 100% &#x27;Test Passed&#x27; and stop integrating any untested changes until a master release is produced. Note that 24h before the cutoff it&#x27;s possible to pick issues out of order towards queues reduction.</li></ul><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>Along this period we always release as many stable weeklies, both supported (always) and security only (when there are changes), as master rolls (on-demand, beta, rc) happen (see <a href="https://tracker.moodle.org/browse/MDLSITE-3470" target="_blank" rel="noopener noreferrer">MDLSITE-3470</a>). Note that those tags are not simply tags but they come with some important implications, aiming to stability, safety and clarity. Integrators will try to remain loyal to them, be warned:</p></div></div><ul><li><strong>Once beta is released</strong>, new features or improvements &quot;unrelated&quot; with the release will be really harder to be accepted. A +4 from developer managers (normally +3 is enough) will be needed to proceed with the issue. Integrators vote will be, always, -1.</li><li><strong>Once rc are released</strong>, new features or improvements &quot;unrelated&quot; with the release are forbidden. No unhold voting, no managers. Simply forbidden.</li><li><strong>Last week before release</strong>, only &quot;related&quot; issues will be picked for integration. Everything else (bug fixes included) are kept out (given the &quot;integration_held&quot; label) if unrelated, at very least until after release. No distractions.</li></ul><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>Definition: <code>related</code> said to be a followup of required/planned to release OR a direct (and recent) regression caused by a bug fix OR a security issue.</p></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="on-sync-period">On-sync period<a class="hash-link" href="#on-sync-period" title="Direct link to heading">​</a></h3><p>Immediately after a major release and for a short period (right now, 2 weeks, matching 1st HQ sprint duration), the integration team is under the named on-sync period.</p><p>At all effects, it&#x27;s a normal period (see above), and weeklies are produced for supported stable branches and also for master. But with one important rule/goal:</p><ul><li>We must keep the latest stable branch and master 100% on-sync, specifically about versions and upgrade steps. Some well-known exceptions to this are: <em>.travis.yml</em>, <em>backup.class.php</em>, <em>config.php</em> (<em>$release</em>, <em>$branch</em>, <em>$maturity</em> and comments only, never <em>$version</em>!), <em>install/lang/xx files</em> (the new stable branch for install lang files is created 2w after the release).</li></ul><p>This simple, but important constraint, is there to facilitate the integration of impeding bugs, needing urgent resolution, and by keeping them the same, we guarantee that any stable or master fix will apply without problems to both branches. Of course, in order to achieve the rule, these must be also observed along the period:</p><ul><li>We continuously perform diffs between the latest stable and master, controlling that we are on-sync. Any non-authorised difference is cleaned (rewritten). Whenever a latest stable branch is missing in the issue (it&#x27;s optional over the period), we automatically cherry pick the changes straight from master.</li><li>Both improvements and new features (and, in general, everything leading to divergence) are held until the on-sync period ends.</li></ul><p>Last, but not less important, a second goal for this on-sync period is:</p><ul><li>The <strong>environmental requirements for next major version</strong> <a href="https://docs.moodle.org/dev/Release_process#2_weeks_after" target="_blank" rel="noopener noreferrer">must be agreed and resolved so they can land to master</a> early in the process, remaining defined and stable over the next, 6 months of, development cycle.
As part of the standard <a href="https://docs.moodle.org/dev/Release_process" target="_blank" rel="noopener noreferrer">Moodle release process</a>, at the beginning of the on-sync period, we &quot;unhold&quot; all bugs that were held during the last week before the release because they were unrelated to the release. At the end of the onsync period we &quot;unhold&quot; all new features that were submitted after the code freeze for the the release.</li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="backporting">Backporting<a class="hash-link" href="#backporting" title="Direct link to heading">​</a></h2><p>Whilst we&#x27;d all like all Moodle users to be using our latest and greatest code, there is a balance to strike between improving our software and maintaining stability (both in terms of regressions, but also training and documentation materials). Large amounts of change on the stable branches make the lives difficult for institutions to manage upgrades between point releases.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="general-policy">General policy<a class="hash-link" href="#general-policy" title="Direct link to heading">​</a></h3><p>Our general policy is as follows:</p><ul><li>Bug fixes will be backported to all (and only to) supported stable branches.<ul><li>When fixing a bug, please provide a fix for all supported stable branches.</li><li>If a fix doesn&#x27;t make sense to be backported to every branch, please make it clear in the issue.</li></ul></li><li>Improvements or new features will only land in master.</li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="process-for-requesting-a-non-bug-fix-backport">Process for requesting a non bug-fix backport<a class="hash-link" href="#process-for-requesting-a-non-bug-fix-backport" title="Direct link to heading">​</a></h3><p>Improvements or new features can be requested to be backported to the stable branches. We urge developers to consider this request carefully. In recent years, Moodle has moved to a short and predictable time based release schedule and we use a very effective distributed source control system. Both of these process changes should ensure that a change not being backported to the stable branches is not as problematic as it may have used to be.</p><p>Should you feel that a new feature or improvement needs backporting, please follow this process:</p><ol><li>File a new issue.</li><li>Set the issue title using our backport template guide. (i.e. &quot;Fix forum alignment (backport of MDL-99999)&quot;).</li><li>Link the original issue using link type &quot;Will help resolve&quot;.</li><li>You should include clear rationale for the request to backport</li></ol><p>The integration team will process backport requests, with the following guidelines:</p><ol><li>The integration team will together consider each request individually considering the needs of the community (influenced by forum posts, moodle partners, nagging developers etc).</li><li>Backports will happen not earlier than 3 weeks and not later than 2 months after the request was performed.</li><li>Rationale will be given for rejection</li></ol><p>If the backport request is approved, please follow the usual development process to submit the feature or improvement on earlier branches. Just to be clear, this means using the new bug number. So, even if the fix you are back-porting cherry-picks cleanly, you will need to amend the commit comment to use the new MDL-XXXXX number.</p><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>It would be good practice to also add a line like &quot;This is a backport of MDL-YYYYY.&quot; in the amended commit comment.</p></div></div><p>You can probably copy the testing instructions from the original issue. If so, make it clear you done this by saying something like &quot;Copied from MDL-66327&quot;. Of course, if you can improve the instructions, feel free to edit. <a href="https://tracker.moodle.org/browse/MDL-66614" target="_blank" rel="noopener noreferrer">MDL-66614</a> and <a href="https://tracker.moodle.org/browse/MDL-66327" target="_blank" rel="noopener noreferrer">MDL-66327</a> are probably a reasonably good example fo what should be done.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="polite-note-about-bug-classification">Polite note about bug classification<a class="hash-link" href="#polite-note-about-bug-classification" title="Direct link to heading">​</a></h3><p>Many issues can be appropriately classified as borderline bug-fix/improvements. We politely request that developers do not try and &#x27;game the system&#x27; by classifying their improvements as bugs intentionally. If your fix is in a grey area, please state your case for it being a bug fix clearly. The integration team will use their discretion where necessary.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="backport-fixes-to-unsupported-branches">Backport fixes to unsupported branches<a class="hash-link" href="#backport-fixes-to-unsupported-branches" title="Direct link to heading">​</a></h3><ul><li>Given the <a href="#general-policy">general policy</a> above, only supported stable branches are candidates normally.</li><li>Also security, privacy, data-loss and regressions caused by any of the previous issue types are accepted to be fixed into security-only supported branches.</li></ul><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>This doesn&#x27;t include <a href="/devdocs/general/development/tracker/labels"><code>security_benefit</code> labelled issues</a>.</p></div></div><ul><li>Apart from the previous, issues required to keep the testing infrastructure working and passing (travis, behat, phpunit, random failures, new steps availability...) will also be accepted when possible into security-only branches.</li><li>Finally, backport to unsupported branches only will happen when the issue is a <strong>direct regression caused by a bug fix</strong> introduced by the very latest releases. This applies to both security-only and out-of-support branches.</li></ul><p>A new weekly release will be performed including all the cases above, but <a href="/devdocs/general/development/process#security-issues">security issues that follow its own special process</a> and are released bi-monthly.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="fixing-issues-identified-during-integration-review-testing">Fixing issues identified during integration review/ testing<a class="hash-link" href="#fixing-issues-identified-during-integration-review-testing" title="Direct link to heading">​</a></h2><p>When a branch has been merged by an integrator, it is important that you do not modify the existing history of your branch (e.g. by amending or squashing your commits) and instead add new commits on top. If you modify the history of your branch, it makes it extremely difficult for the integrator to merge your changes (and see the differences).</p><p>As a general rule, this means that if your issue has entered the &#x27;in integration review&#x27; stage of the development process, please only add new commits on top of your existing commits. There are circumstances when your issue will be &#x27;in integration review&#x27; but not merged (and thus possible to squash changes) but if in any doubt, please add new commits and ask the integrator to squash your changes for you.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="commit-squashing">Commit squashing<a class="hash-link" href="#commit-squashing" title="Direct link to heading">​</a></h2><p>The Integration team will sometimes recommend squashing commits when things do not look natural (and may offer to do this for you), especially when there are &quot;fix-commits&quot; in the history happening before integration. You will not be forced to squash your changes because our policy is: <em>&quot;If you want your history of commits to look like bad, it&#x27;s your history.&quot;</em>.</p><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>You should pay close attention to <a href="/devdocs/general/development/policies/codingstyle#git-commits">Git_commits</a> and intend to <em>&quot;Tell a perfect, cleaned up version of the history. As if the code was written perfectly first time.&quot;</em>.</p></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-tags-row row margin-bottom--sm"><div class="col"><b>Tags:</b><ul class="tags_XVD_ padding--none margin-left--sm"><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/devdocs/general/tags/processes">Processes</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/devdocs/general/tags/core-development">Core development</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/devdocs/general/tags/integration">Integration</a></li></ul></div></div><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/andrewnicols/devdocs/edit/main/general/development/process/integration-review.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_foO9"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2022-05-12T07:08:29.000Z">12/05/2022</time></b> by <b>Sara Arjona</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/devdocs/general/development/process/peer-review"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Peer review</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/devdocs/general/development/process/testing"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Testing</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#purpose" class="table-of-contents__link toc-highlight">Purpose</a></li><li><a href="#integration-principles" class="table-of-contents__link toc-highlight">Integration Principles</a></li><li><a href="#component-lead-review-process" class="table-of-contents__link toc-highlight">Component lead review process</a></li><li><a href="#integration-review-process" class="table-of-contents__link toc-highlight">Integration Review Process</a></li><li><a href="#schedule" class="table-of-contents__link toc-highlight">Schedule</a><ul><li><a href="#in-normal-periods" class="table-of-contents__link toc-highlight">In normal periods</a></li><li><a href="#during-continuous-integrationfreezeqa-period" class="table-of-contents__link toc-highlight">During continuous integration/Freeze/QA period</a></li><li><a href="#on-sync-period" class="table-of-contents__link toc-highlight">On-sync period</a></li></ul></li><li><a href="#backporting" class="table-of-contents__link toc-highlight">Backporting</a><ul><li><a href="#general-policy" class="table-of-contents__link toc-highlight">General policy</a></li><li><a href="#process-for-requesting-a-non-bug-fix-backport" class="table-of-contents__link toc-highlight">Process for requesting a non bug-fix backport</a></li><li><a href="#polite-note-about-bug-classification" class="table-of-contents__link toc-highlight">Polite note about bug classification</a></li><li><a href="#backport-fixes-to-unsupported-branches" class="table-of-contents__link toc-highlight">Backport fixes to unsupported branches</a></li></ul></li><li><a href="#fixing-issues-identified-during-integration-review-testing" class="table-of-contents__link toc-highlight">Fixing issues identified during integration review/ testing</a></li><li><a href="#commit-squashing" class="table-of-contents__link toc-highlight">Commit squashing</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/devdocs/general/documentation">Developer docs</a></li><li class="footer__item"><a href="https://docs.moodle.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">User docs<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://docs.moodle.org/dev/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Legacy docs<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://moodle.org/mod/forum/view.php?id=55" target="_blank" rel="noopener noreferrer" class="footer__link-item">General Developer Forum<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/moodle" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/moodlehq" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">
Copyright © 2022 Moodle Pty Ltd. Built with Docusaurus.</div></div></div></footer></div>
<script src="/devdocs/assets/js/runtime~main.336c63d6.js"></script>
<script src="/devdocs/assets/js/main.1cb9071a.js"></script>
</body>
</html>